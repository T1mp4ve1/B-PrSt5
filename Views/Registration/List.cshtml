@model Hotel.Models.RegistrationViewModel

@if (User.IsInRole("Admin"))
{
  <h3>Aggiungi Dipendente</h3>
<form asp-action="AddStaff" method="post" class="mb-3">
    <div class="form-group mb-2">
        <input asp-for="NuovoDipendente.Email" class="form-control" placeholder="Email..." />
        <span asp-validation-for="NuovoDipendente.Email" class="text-danger"></span>
    </div>
    <div class="form-group mb-2">
        <input asp-for="NuovoDipendente.Nome" class="form-control" placeholder="Nome..." />
        <span asp-validation-for="NuovoDipendente.Nome" class="text-danger"></span>
    </div>
    <div class="form-group mb-2">
        <input asp-for="NuovoDipendente.Cognome" class="form-control" placeholder="Cognome..." />
        <span asp-validation-for="NuovoDipendente.Cognome" class="text-danger"></span>
    </div>
    <div class="form-group mb-2">
        <input asp-for="NuovoDipendente.Telefono" class="form-control" placeholder="Telefono..." />
        <span asp-validation-for="NuovoDipendente.Telefono" class="text-danger"></span>
    </div>
    <div class="form-group mb-2">
        <input asp-for="NuovoDipendente.Password" type="password" class="form-control" placeholder="Password..." />
        <span asp-validation-for="NuovoDipendente.Password" class="text-danger"></span>
    </div>
    <div class="form-group mb-2">
        <label>Ruolo</label>
        <select asp-for="NuovoDipendente.Ruolo" class="form-control">
            <option value="Admin">Admin</option>
            <option value="Staff">Staff</option>
        </select>
        <span asp-validation-for="NuovoDipendente.Ruolo" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-outline-success">Crea</button>
</form>
<hr />  
}

<h2>Utenti registrati</h2>
<table class="table">
    <thead>
        <tr>
            <th>Email</th>
            <th>Nome</th>
            <th>Cognome</th>
            <th>Ruoli</th>
            @if (User.IsInRole("Admin"))
            {
                <th>Azioni</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var u in Model.Utenti)
        {
            <tr>
                <td>@u.Email</td>
                <td>@u.Nome</td>
                <td>@u.Cognome</td>
                <td>@string.Join(", ", Model.Ruoli[u.Id])</td>
                @if (User.IsInRole("Admin"))
                {
                    <td>
                        <form asp-action="Delete" method="post" asp-route-id="@u.Id" style="display:inline">
                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                        </form>
                        <a asp-action="Edit" asp-route-id="@u.Id" class="btn btn-warning btn-sm">Update</a>
                    </td>
                }
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}